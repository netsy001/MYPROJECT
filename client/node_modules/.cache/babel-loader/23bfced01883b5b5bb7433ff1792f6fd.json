{"ast":null,"code":"import _regeneratorRuntime from\"D:/myproject/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _objectSpread from\"D:/myproject/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _asyncToGenerator from\"D:/myproject/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"D:/myproject/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import{Form,Button}from'react-bootstrap';import FileBase from'react-file-base64';import{useDispatch,useSelector}from'react-redux';import{useHistory}from'react-router-dom';import{createPost,updatePost}from'../../actions/posts';// import { Redirect } from \"react-router-dom\";\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Forms(_ref){var _user$result3;var currentId=_ref.currentId,setCurrentId=_ref.setCurrentId;// redirectToReferrer: false\nvar _useState=useState({title:'',message:'',selectedFile:''}),_useState2=_slicedToArray(_useState,2),postData=_useState2[0],setPostData=_useState2[1];var post=useSelector(function(state){return currentId?state.posts.find(function(message){return message._id=currentId;}):null;});var dispatch=useDispatch();var history=useHistory();var user=JSON.parse(localStorage.getItem('profile'));useEffect(function(){if(post)setPostData(post);},[post]);var handleSubmit=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var _user$result,_user$result2;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();console.log(currentId);if(currentId===0){dispatch(createPost(_objectSpread(_objectSpread({},postData),{},{name:user===null||user===void 0?void 0:(_user$result=user.result)===null||_user$result===void 0?void 0:_user$result.name})));clear();history.push('/');}else{dispatch(updatePost(currentId,_objectSpread(_objectSpread({},postData),{},{name:user===null||user===void 0?void 0:(_user$result2=user.result)===null||_user$result2===void 0?void 0:_user$result2.name})));clear();history.push('/');}// clear();\n// redirectToReferrer: true;\ncase 3:case\"end\":return _context.stop();}}},_callee);}));return function handleSubmit(_x){return _ref2.apply(this,arguments);};}();if(!(user===null||user===void 0?void 0:(_user$result3=user.result)===null||_user$result3===void 0?void 0:_user$result3.name)){return/*#__PURE__*/_jsx(\"h5\",{className:\"please-sign\",children:\"Please Sign In to create your own Event.\"});}var clear=function clear(e){setCurrentId(0);setPostData({title:'',message:'',selectedFile:''});};// const redirectToReferrer = this.state.redirectToReferrer;\n//     if (redirectToReferrer === true) {\n//          <Redirect to=\"/\" />\n//     }\nreturn/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(Form,{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(Form.Label,{children:[/*#__PURE__*/_jsxs(\"strong\",{children:[currentId?'Editing':'Creating',\" an Event \"]}),\" \"]}),/*#__PURE__*/_jsxs(Form.Group,{controlId:\"formGroupTitle\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Title\"}),/*#__PURE__*/_jsx(Form.Control,{name:\"title\",type:\"text\",placeholder:\"title\",value:postData.title,onChange:function onChange(e){return setPostData(_objectSpread(_objectSpread({},postData),{},{title:e.target.value}));}})]}),/*#__PURE__*/_jsxs(Form.Group,{controlId:\"formGroupMessage\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Message\"}),/*#__PURE__*/_jsx(Form.Control,{name:\"message\",type:\"text\",placeholder:\"message\",value:postData.message,onChange:function onChange(e){return setPostData(_objectSpread(_objectSpread({},postData),{},{message:e.target.value}));}})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"div\",{className:\"selected-file\",children:/*#__PURE__*/_jsx(FileBase,{type:\"file\",multiple:false,onDone:function onDone(_ref3){var base64=_ref3.base64;return setPostData(_objectSpread(_objectSpread({},postData),{},{selectedFile:base64}));}})}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(Button,{variant:\"primary\",type:\"submit\",children:\"Submit\"}),' ',/*#__PURE__*/_jsx(Button,{variant:\"secondary\",onClick:clear,children:\"Clear\"})]})});}export default Forms;","map":{"version":3,"sources":["D:/myproject/client/src/components/Form/Form.js"],"names":["React","useState","useEffect","Form","Button","FileBase","useDispatch","useSelector","useHistory","createPost","updatePost","Forms","currentId","setCurrentId","title","message","selectedFile","postData","setPostData","post","state","posts","find","_id","dispatch","history","user","JSON","parse","localStorage","getItem","handleSubmit","e","preventDefault","console","log","name","result","clear","push","target","value","base64"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react'\r\nimport { Form, Button } from 'react-bootstrap';\r\nimport FileBase from 'react-file-base64';\r\n\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport {useHistory } from 'react-router-dom';\r\nimport { createPost, updatePost } from '../../actions/posts';\r\n// import { Redirect } from \"react-router-dom\";\r\n\r\n\r\n\r\n\r\nfunction Forms({ currentId, setCurrentId }) {\r\n\r\n    // redirectToReferrer: false\r\n\r\n    const [postData, setPostData] = useState({\r\n        title: '', message: '', selectedFile: ''\r\n    });\r\n    const post = useSelector((state) => (currentId ? state.posts.find((message) => message._id = currentId) : null));\r\n\r\n\r\n    const dispatch = useDispatch();\r\n    const history = useHistory();\r\n    const user = JSON.parse(localStorage.getItem('profile'));\r\n\r\n    useEffect(() => {\r\n        if (post) setPostData(post);\r\n    }, [post]);\r\n\r\n    const handleSubmit = async (e) => {\r\n        e.preventDefault();\r\n        console.log(currentId);\r\n        if (currentId === 0) {\r\n            dispatch(createPost({...postData, name:user?.result?.name}));\r\n            clear();\r\n            history.push('/');\r\n            \r\n        } else {\r\n            dispatch(updatePost(currentId, {...postData, name:user?.result?.name}));\r\n            clear();\r\n            history.push('/');\r\n        }\r\n        // clear();\r\n        // redirectToReferrer: true;\r\n      \r\n    };\r\n    if (!user?.result?.name) {\r\n        return (\r\n          <h5 className=\"please-sign\">\r\n              Please Sign In to create your own Event.\r\n          </h5>\r\n        );\r\n      }\r\n\r\n    const clear = (e) => {\r\n        setCurrentId(0);\r\n        setPostData({  title: '', message: '', selectedFile:'' });\r\n    }\r\n\r\n    // const redirectToReferrer = this.state.redirectToReferrer;\r\n    //     if (redirectToReferrer === true) {\r\n    //          <Redirect to=\"/\" />\r\n    //     }\r\n    return (\r\n        <div>\r\n            <Form onSubmit={handleSubmit}>\r\n                <Form.Label><strong>{currentId ? 'Editing' : 'Creating'} an Event </strong> </Form.Label>\r\n                <Form.Group controlId=\"formGroupTitle\">\r\n                    <Form.Label>Title</Form.Label>\r\n                    <Form.Control name=\"title\" type=\"text\" placeholder=\"title\" value={postData.title} onChange={(e) => setPostData({ ...postData, title: e.target.value })} />\r\n                </Form.Group>\r\n                <Form.Group controlId=\"formGroupMessage\">\r\n                    <Form.Label>Message</Form.Label>\r\n                    <Form.Control name=\"message\" type=\"text\" placeholder=\"message\" value={postData.message} onChange={(e) => setPostData({ ...postData, message: e.target.value })} />\r\n                </Form.Group>\r\n                <br></br>\r\n                <div className=\"selected-file\">\r\n                    <FileBase type='file' multiple={false} onDone={({ base64 }) => setPostData({ ...postData, selectedFile: base64 })} />\r\n                </div>\r\n                <br></br>\r\n                <Button variant=\"primary\" type=\"submit\">Submit</Button>{' '}\r\n                <Button variant=\"secondary\" onClick={clear}>Clear</Button>\r\n            </Form>\r\n        </div>\r\n    )\r\n}\r\n\r\n\r\nexport default Forms;"]},"metadata":{},"sourceType":"module"}