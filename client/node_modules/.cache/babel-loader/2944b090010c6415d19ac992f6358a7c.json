{"ast":null,"code":"import _regeneratorRuntime from\"D:/myproject/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"D:/myproject/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _defineProperty from\"D:/myproject/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"D:/myproject/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"D:/myproject/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from'react';import{Container,Button}from'react-bootstrap';import{GoogleLogin}from'react-google-login';import GoogleButton from'react-google-button';// import * as Icon from 'react-bootstrap-icons';\nimport{useDispatch}from'react-redux';import{useHistory}from'react-router-dom';import{signin,signup}from'../../actions/auth';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var initialState={firstName:'',lastName:\"\",email:\"\",password:\"\",confirmPassword:\"\"};var Auth=function Auth(){var dispatch=useDispatch();var history=useHistory();var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isSignup=_useState2[0],setIsSignup=_useState2[1];var _useState3=useState(initialState),_useState4=_slicedToArray(_useState3,2),formData=_useState4[0],setFormData=_useState4[1];var handleSubmit=function handleSubmit(e){e.preventDefault();console.log(formData);if(isSignup){dispatch(signup(formData,history));}else{dispatch(signin(formData,history));}};var handleChange=function handleChange(e){setFormData(_objectSpread(_objectSpread({},formData),{},_defineProperty({},e.target.name,e.target.value)));};var switchMode=function switchMode(){setFormData(initialState);setIsSignup(function(prevIsSignup){return!prevIsSignup;});setShowPassword(false);};var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),showPassword=_useState6[0],setShowPassword=_useState6[1];var handleShowPassword=function handleShowPassword(){return setShowPassword(showPassword);};var googleSuccess=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(response){var result,token;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:console.log(response);//using optional chaining operator for not getting error\nresult=response===null||response===void 0?void 0:response.profileObj;token=response===null||response===void 0?void 0:response.tokenId;try{dispatch({type:'AUTH',data:{result:result,token:token}});history.push('/');}catch(error){console.log(error);}case 4:case\"end\":return _context.stop();}}},_callee);}));return function googleSuccess(_x){return _ref.apply(this,arguments);};}();var googleFailure=function googleFailure(error){console.log(error);alert('Unsuccessfull');};return/*#__PURE__*/_jsx(Container,{children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[isSignup&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"First name\"}),/*#__PURE__*/_jsx(\"input\",{name:\"firstName\",type:\"text\",className:\"form-control\",onChange:handleChange,placeholder:\"First name\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Last name\"}),/*#__PURE__*/_jsx(\"input\",{name:\"lastName\",type:\"text\",className:\"form-control\",onChange:handleChange,placeholder:\"Last name\",required:true})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Email address\"}),/*#__PURE__*/_jsx(\"input\",{name:\"email\",type:\"email\",className:\"form-control\",onChange:handleChange,placeholder:\"Enter email\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Password\"}),/*#__PURE__*/_jsx(\"input\",{name:\"password\",type:showPassword?\"text\":\"password\",handleShowPassword:handleShowPassword,className:\"form-control\",onChange:handleChange,placeholder:\"Enter password\",required:true})]}),isSignup&&/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Repeat Password\"}),/*#__PURE__*/_jsx(\"input\",{name:\"confirmPassword\",type:\"Password\",className:\"form-control\",onChange:handleChange,placeholder:\"Repeat password\",required:true})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-primary btn-block\",children:isSignup?'Sign Up':'Sign In'}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(GoogleLogin,{clientId:\"563107909711-f2nnqsrvbhvpbk53bhvfpr7if9fek34m.apps.googleusercontent.com\",render:function render(renderProps){return/*#__PURE__*/_jsx(GoogleButton,{label:\"Sign in with Google\",onClick:renderProps.onClick,disabled:renderProps.disabled});},onSuccess:googleSuccess,onFailure:googleFailure,cookiePolicy:\"single_host_origin\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(Button,{onClick:switchMode,children:[\" \",isSignup?'Already have an account? Sign In':\"Don't have an account? Sign Up\",\" \"]})})]})});};export default Auth;","map":{"version":3,"sources":["D:/myproject/client/src/components/Auth/Auth.js"],"names":["React","useState","Container","Button","GoogleLogin","GoogleButton","useDispatch","useHistory","signin","signup","initialState","firstName","lastName","email","password","confirmPassword","Auth","dispatch","history","isSignup","setIsSignup","formData","setFormData","handleSubmit","e","preventDefault","console","log","handleChange","target","name","value","switchMode","prevIsSignup","setShowPassword","showPassword","handleShowPassword","googleSuccess","response","result","profileObj","token","tokenId","type","data","push","error","googleFailure","alert","renderProps","onClick","disabled"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\r\nimport { Container, Button } from 'react-bootstrap';\r\nimport { GoogleLogin } from 'react-google-login';\r\nimport GoogleButton from 'react-google-button';\r\n// import * as Icon from 'react-bootstrap-icons';\r\nimport { useDispatch } from 'react-redux';\r\nimport { useHistory } from 'react-router-dom';\r\nimport {signin, signup } from '../../actions/auth';\r\n\r\nconst initialState = { firstName: '', lastName: \"\", email: \"\", password: \"\", confirmPassword: \"\" };\r\n\r\n\r\n\r\n\r\nconst Auth = () => {\r\n\r\n    const dispatch = useDispatch();\r\n    const history = useHistory();\r\n\r\n    const [isSignup, setIsSignup] = useState(false);\r\n    const [formData, setFormData] = useState(initialState);\r\n\r\n\r\n\r\n    const handleSubmit = (e) => {\r\n        e.preventDefault();\r\n        console.log(formData);\r\n\r\n        if(isSignup) {\r\n            dispatch(signup(formData, history));\r\n        } else {\r\n            dispatch (signin(formData, history));\r\n        }\r\n    };\r\n\r\n    const handleChange = (e) => {\r\n        setFormData({ ...formData, [e.target.name]: e.target.value });\r\n    }\r\n\r\n    const switchMode = () => {\r\n        setFormData(initialState);\r\n        setIsSignup((prevIsSignup) => !prevIsSignup);\r\n        setShowPassword(false);\r\n    }\r\n\r\n    const [showPassword, setShowPassword] = useState(false);\r\n    const handleShowPassword = () => setShowPassword(showPassword);\r\n\r\n    const googleSuccess = async (response) => {\r\n        console.log(response);\r\n        //using optional chaining operator for not getting error\r\n        const result = response?.profileObj;\r\n        const token = response?.tokenId;\r\n\r\n        try {\r\n            dispatch({ type: 'AUTH', data: { result, token } });\r\n            history.push('/');\r\n\r\n        } catch (error) {\r\n            console.log(error);\r\n        }\r\n    };\r\n\r\n    const googleFailure = (error) => {\r\n        console.log(error);\r\n        alert('Unsuccessfull');\r\n    };\r\n\r\n    return (\r\n        <Container>\r\n            <form onSubmit={handleSubmit}>\r\n                { isSignup && (\r\n                        <>\r\n                            <div className=\"form-group\">\r\n                                <label>First name</label>\r\n                                <input name=\"firstName\" type=\"text\" className=\"form-control\" onChange={handleChange} placeholder=\"First name\" required />\r\n                            </div>\r\n\r\n                            <div className=\"form-group\">\r\n                                <label>Last name</label>\r\n                                <input name=\"lastName\" type=\"text\" className=\"form-control\" onChange={handleChange} placeholder=\"Last name\" required />\r\n                            </div>\r\n                        </>\r\n                    )}\r\n\r\n                <div className=\"form-group\">\r\n                    <label>Email address</label>\r\n                    <input name=\"email\" type=\"email\" className=\"form-control\" onChange={handleChange} placeholder=\"Enter email\" required />\r\n                </div>\r\n\r\n                <div className=\"form-group\">\r\n                    <label>Password</label>\r\n                    <input name=\"password\" type={showPassword ? \"text\" : \"password\"} handleShowPassword={handleShowPassword} className=\"form-control\" onChange={handleChange} placeholder=\"Enter password\" required />\r\n                </div>\r\n\r\n                {isSignup && <div className=\"form-group\">\r\n                    <label>Repeat Password</label>\r\n                    <input name=\"confirmPassword\" type=\"Password\" className=\"form-control\" onChange={handleChange} placeholder=\"Repeat password\" required />\r\n                </div>} \r\n                <br></br>\r\n                <button type=\"submit\" className=\"btn btn-primary btn-block\">{isSignup ? 'Sign Up' : 'Sign In'}</button>\r\n\r\n                <br></br>\r\n                <br></br>\r\n\r\n                <GoogleLogin\r\n                    clientId='563107909711-f2nnqsrvbhvpbk53bhvfpr7if9fek34m.apps.googleusercontent.com'\r\n                    render={(renderProps) => (\r\n                        <GoogleButton\r\n                            label='Sign in with Google'\r\n                            onClick={renderProps.onClick} disabled={renderProps.disabled}\r\n                        />\r\n                    )}\r\n                    onSuccess={googleSuccess}\r\n                    onFailure={googleFailure}\r\n                    cookiePolicy='single_host_origin'\r\n                />\r\n\r\n\r\n                <br></br>\r\n                <div>\r\n                    <Button onClick={switchMode}> {isSignup ? 'Already have an account? Sign In' : \"Don't have an account? Sign Up\"} </Button>\r\n                </div>\r\n            </form>\r\n        </Container>\r\n    )\r\n}\r\n\r\nexport default Auth\r\n"]},"metadata":{},"sourceType":"module"}